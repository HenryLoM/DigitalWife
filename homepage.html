<!-- ================================================================== -->
<!-- Wife AI — Homepage -->
<!-- ================================================================== -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>DigitalWife — Homepage</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="referrer" content="no-referrer">

    <!-- Styles -->
    <link rel="stylesheet" href="./chat.css">
    <style>
        body { overflow-y: auto; }
    </style>

    <!-- Theme Switcher -->
    <script src="./code/*theme-switcher.js" type="module"></script>
</head>
<body>

<!-- ================================================================== -->
<!-- Frame Structure -->
<!-- ================================================================== -->
<div id="frame-wrapper">
    <div class="frame-corner left-top"></div>
    <div class="frame-corner right-top"></div>
    <div class="frame-corner left-bottom"></div>
    <div class="frame-corner right-bottom"></div>

    <div class="frame-edge top"></div>
    <div class="frame-edge bottom"></div>
    <div class="frame-edge left"></div>
    <div class="frame-edge right"></div>
</div>

<!-- ================================================================== -->
<!-- Table Layout -->
<!-- ================================================================== -->
<table>
    <thead>
        <tr>
            <td>
                <pre class="centered color" style="margin-top: -75px;">
  |\      _,,,---,,_
ZZZzz /,`.-'`'    -.  ;-;;,_
     |,4-  ) )-,_. ,\ (  `' -'
'---''(_/--'  `-'\_)
                </pre>

                <p style="text-align: center;">
                    > <a href="./homepage.html" class="mask">Home</a> < |
                    <a href="./chat.html">Chat</a> |
                    <a href="./log.html" class="mask"><i>Last updated:</i> 2025-09-08</a>
                </p>
            </td>
        </tr>
    </thead>

    <tbody>
        <tr>
            <td>
                <!-- ================================================================== -->
                <!-- Main Container -->
                <!-- ================================================================== -->
                <div id="container-setup" style="display: flex; flex-direction: column; align-items: center; gap: 32px; margin-top: 32px;">

                    <!-- Title -->
                    <h1 class="centered color" style="font-size: 2.8em; margin: 0;">Wife AI</h1>

                    <!-- Nicole Roller Endless -->
                    <div id="nicole-roller" class="container-row" style="width: 960px; height: 320px; overflow: hidden; position: relative; border-radius: 16px; box-shadow: 0 2px 16px #0002; background: var(--main-color); display: flex; align-items: center; justify-content: flex-start;">
                        <div id="nicole-roller-track" style="display: flex; position: absolute; left: 0; top: 0; height: 100%; will-change: transform;"></div>
                    </div>

                    <!-- Buttons -->
                    <div style="display: flex; gap: 24px;">
                        <a href="./chat.html" class="mask"><button style="margin: -10px 0 -10px 5px;">Try Chat Now</button></a>
                        <a href="https://github.com" target="_blank" class="mask"><button style="margin: -10px 0 -10px 0;">GitHub Source</button></a>
                    </div>

                    <!-- Separator -->
                    <h1 class="centered color" style="font-size: 1.5em; margin: 0;">Little guideness</h1>

                    <!-- Screenshots -->
                    <div style="display: flex; gap: 32px; text-align: center;">
                        <div>
                            <img src="./media/screenshots/Chat.png" alt="Chat Screenshot" class="screenshot" style="width: 427px; height: 240px; border-radius: 12px; border: 2px dashed var(--sub-color); object-fit: cover; cursor: pointer;">
                            <p style="margin-top: 8px; font-size: 1.1em; color: var(--in-color);">Chat</p>
                        </div>
                        <div>
                            <img src="./media/screenshots/Settings.png" alt="Settings Screenshot" class="screenshot" style="width: 427px; height: 240px; border-radius: 12px; border: 2px dashed var(--sub-color); object-fit: cover; cursor: pointer;">
                            <p style="margin-top: 8px; font-size: 1.1em; color: var(--in-color);">Settings</p>
                        </div>
                    </div>

                    <!-- Modal -->
                    <div id="modal">
                        <div id="modalContent">
                            <button id="closeModal">×</button>
                            <img id="modalImg" src="" alt="Expanded Screenshot">
                        </div>
                    </div>
                </div>
            </td>
        </tr>
    </tbody>

    <tfoot>
        <tr>
            <td>
                <pre class="centered color">
   へ     ╱|、
૮ - ՛ )   (` - 7
乀(ˍ,ل ل    じしˍ,)ノ
<i>Incel home! (Kidding)</i>
                </pre>
            </td>
        </tr>
    </tfoot>
</table>

<!-- ================================================================== -->
<!-- Modal Styles -->
<!-- ================================================================== -->
<style>
#modal {
    position: fixed;
    inset: 0;
    width: 120%;
    margin-left: -10%;
    background: #00000099;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
}
#modal.active {
    opacity: 1;
    pointer-events: auto;
}

#modalContent {
    position: relative;
    background: var(--main-color);
    padding: 12px;
    border-radius: 12px;
    box-shadow: 0 4px 20px #0006;
    max-width: 75vw;
    max-height: 75vh;
    display: flex;
    align-items: center;
    justify-content: center;
    transform: scale(0.9);
    transition: transform 0.3s ease;
}
#modal.active #modalContent { transform: scale(1); }

#modalImg {
    max-width: 70vw;
    max-height: 70vh;
    border-radius: 8px;
    object-fit: contain;
    display: block;
}

#closeModal {
    position: absolute;
    top: 8px;
    right: 8px;
    border: none;
    background: #0008;
    color: white;
    font-size: 1.2em;
    border-radius: 50%;
    width: 28px;
    height: 28px;
    cursor: pointer;
}
</style>

<!-- ================================================================== -->
<!-- JavaScript -->
<!-- ================================================================== -->
<script type="module">
// ================================
// Modal Logic
// ================================
const modal = document.getElementById("modal");
const modalImg = document.getElementById("modalImg");
const closeBtn = document.getElementById("closeModal");

// Open modal
for (const img of document.querySelectorAll(".screenshot")) {
    img.addEventListener("click", () => {
    window.scrollTo({ top: document.body.scrollHeight/6, behavior: "smooth" });
        modal.classList.add("active");
        modalImg.src = img.src;
        document.body.style.overflow = "hidden";
    });
}

// Close modal button
closeBtn.addEventListener("click", () => {
    modal.classList.remove("active");
    setTimeout(() => modalImg.src = "", 300);
    setTimeout(() => { document.body.style.overflow = ""; }, 300);
});

// Close modal outside content
modal.addEventListener("click", e => {
    if (e.target === modal) {
        modal.classList.remove("active");
        setTimeout(() => modalImg.src = "", 300);
        setTimeout(() => { document.body.style.overflow = ""; }, 300);
    }
});

// ================================
// Nicole Roller Assets
// ================================
const bodies = [
    'media/nicole/bodies/white.png',
    'media/nicole/bodies/black.png',
    'media/nicole/bodies/tan.png',
    'media/nicole/bodies/albino.png',
];
const clothes = [
    'media/nicole/clothes/bikini.png',
    'media/nicole/clothes/hoodie-green.png',
    'media/nicole/clothes/hoodie-loose.png',
    'media/nicole/clothes/summer-dress.png',
    'media/nicole/clothes/uniform-school-light.png',
    'media/nicole/clothes/uniform-school-dark.png',
    'media/nicole/clothes/pajama.png',
    'media/nicole/clothes/bloose-offical.png',
    'media/nicole/clothes/uniform-academy.png',
];
const hairsFront = [
    'media/nicole/hair/lob-brown front.png',
    'media/nicole/hair/lob-blonde front.png',
    'media/nicole/hair/lob-pink front.png',
    'media/nicole/hair/long-silver front.png',
    'media/nicole/hair/long-blonde front.png',
    'media/nicole/hair/long-silver front.png',
    'media/nicole/hair/bob-pink front.png',
    'media/nicole/hair/hime-black front.png',
    'media/nicole/hair/hime-brown front.png',
    'media/nicole/hair/twin-black front.png',
];
const expressions = [
    'media/nicole/expressions/happy 1.png',
    'media/nicole/expressions/smile 1.png',
    'media/nicole/expressions/smile 2.png',
    'media/nicole/expressions/neutral.png',
    'media/nicole/expressions/sad.png',
    'media/nicole/expressions/-smug.png',
];
const additionals = [
    'media/nicole/additional/band-black.png',
    'media/nicole/additional/band-white.png',
    'media/nicole/additional/choker.png',
    'media/nicole/additional/flower.png',
    'media/nicole/additional/makeup.png',
];

// ================================
// Roller Logic
// ================================
const rollerTrack = document.getElementById('nicole-roller-track');
const compositeWidth = 280;
const compositeHeight = 320;
const visibleComposites = 4;
let composites = [];

function createNicoleComposite() {
    const frontHair = hairsFront[Math.floor(Math.random() * hairsFront.length)];
    const backHair = frontHair.replace('front.png', 'back.png');
    const body = bodies[Math.floor(Math.random() * bodies.length)];
    const expr = expressions[Math.floor(Math.random() * expressions.length)];
    const clothesItem = clothes[Math.floor(Math.random() * clothes.length)];
    const additional = additionals[Math.floor(Math.random() * additionals.length)];

    const wrapper = document.createElement('div');
    wrapper.className = 'nicole-composite';
    wrapper.style.cssText = `position:relative;width:${compositeWidth}px;height:${compositeHeight}px;flex:none;margin-right:16px;overflow:hidden;`;

    // Preload images before showing
    const images = [backHair, body, expr, clothesItem, frontHair, additional];
    let loaded = 0;

    images.forEach((src, index) => {
        const img = new Image();
        img.src = src;
        img.style.cssText = `position:absolute;left:0;top:0;width:100%;height:100%;z-index:${index + 1};`;
        img.onload = () => {
            loaded++;
            if (loaded === images.length) wrapper.style.visibility = "visible";
        };
        wrapper.appendChild(img);
    });

    // Prevent dragging and selection
    wrapper.addEventListener("dragstart", e => e.preventDefault());
    wrapper.addEventListener("selectstart", e => e.preventDefault());
    wrapper.addEventListener("mousedown", e => e.preventDefault());

    wrapper.style.visibility = "hidden";
    return wrapper;
}

function addCompositeToRoller() {
    const composite = createNicoleComposite();
    rollerTrack.appendChild(composite);
    composites.push(composite);
}

function removeFirstComposite() {
    if (composites.length > 0) {
        rollerTrack.removeChild(composites[0]);
        composites.shift();
    }
}

// Initial fill
for (let i = 0; i < visibleComposites + 2; i++) {
    const composite = createNicoleComposite();
    rollerTrack.appendChild(composite);
    composites.push(composite);
}

let offset = 0;
const speed = 1;

function animateRoller() {
    offset -= speed;
    rollerTrack.style.transform = `translateX(${offset}px)`;

    // Smoothly check if first composite is out of view
    if (composites.length > 0 && offset <= -compositeWidth - 16) {
        // Move the first composite to the end instead of removing and creating a new one
        const first = composites.shift();
        offset += compositeWidth + 16; // adjust offset
        rollerTrack.appendChild(first); // recycle it
        composites.push(first);

        // Optionally, update images in recycled composite for variety
        const newComposite = createNicoleComposite();
        rollerTrack.replaceChild(newComposite, first);
        composites[composites.length - 1] = newComposite;
    }

    requestAnimationFrame(animateRoller);
}

animateRoller();
</script>

</body>
</html>